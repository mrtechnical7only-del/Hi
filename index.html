<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Queen Benazir - Kitten Magic & Music</title>
    <!-- Romantic Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        /* --- CSS STYLES --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #050005; 
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Dancing Script', cursive;
            touch-action: none;
        }

        #bg-gradient {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #2c001e 0%, #050005 100%);
            z-index: 0;
        }

        #mainCanvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* Start Screen */
        #overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            transition: opacity 1s;
        }

        .btn {
            padding: 18px 50px;
            font-size: 2rem;
            background: linear-gradient(45deg, #ff0040, #ff5c8a);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 0, 64, 0.4);
            font-family: 'Great Vibes', cursive;
            margin-top: 20px;
        }

        /* The Main Heart UI */
        #heart-ui {
            position: relative;
            z-index: 10;
            cursor: pointer;
            display: none;
            text-align: center;
        }

        .heart {
            width: 140px;
            height: 140px;
            background-color: #ff0040;
            position: relative;
            transform: rotate(-45deg);
            animation: pulse 0.8s infinite alternate cubic-bezier(0.25, 0, 0, 1);
            box-shadow: 0 0 60px rgba(255, 0, 64, 0.7);
            margin: 0 auto;
        }

        .heart::before, .heart::after {
            content: "";
            width: 140px;
            height: 140px;
            background-color: #ff0040;
            border-radius: 50%;
            position: absolute;
        }

        .heart::before { top: -70px; left: 0; }
        .heart::after { top: 0; left: 70px; }

        @keyframes pulse {
            0% { transform: rotate(-45deg) scale(1); }
            100% { transform: rotate(-45deg) scale(1.3); }
        }

        .msg {
            color: #ffb3c1;
            margin-top: 120px;
            font-size: 1.8rem;
            text-shadow: 0 0 15px rgba(255,179,193,0.6);
        }

        /* Hidden YouTube Container */
        #yt-player {
            display: none;
        }
    </style>
</head>
<body>

    <div id="bg-gradient"></div>

    <div id="overlay">
        <h1 style="font-size: 3rem; font-family: 'Great Vibes'; margin-bottom: 10px;">For Benazir Fatima</h1>
        <p style="font-size: 1.2rem; opacity: 0.7;">Something magical is waiting for you...</p>
        <button class="btn" onclick="initExperience()">Open Your Gift üê±‚ù§Ô∏è</button>
    </div>

    <div id="heart-ui" onclick="explode()">
        <div class="heart"></div>
        <p class="msg">Benazir, touch my heart...</p>
    </div>

    <!-- Hidden YouTube Player for Baby Song -->
    <div id="yt-player"></div>

    <canvas id="mainCanvas"></canvas>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        const overlay = document.getElementById('overlay');
        const heartUI = document.getElementById('heart-ui');

        let width, height, particles = [], points = [], stars = [], kittens = [];
        let animationActive = false;
        let audioCtx;
        const apiKey = ""; 

        // YouTube API Setup
        let player;
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('yt-player', {
                height: '0',
                width: '0',
                videoId: 'kffacxfA7G4', // Justin Bieber - Baby
                playerVars: {
                    'autoplay': 0,
                    'controls': 0,
                    'start': 45 // Start near the chorus for maximum impact
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            // Player is ready but won't play until explosion
        }

        function createStars() {
            stars = [];
            for(let i=0; i<80; i++) {
                stars.push({ x: Math.random() * width, y: Math.random() * height, size: Math.random() * 2, speed: Math.random() * 0.5 + 0.2, opacity: Math.random() });
            }
        }

        class MagicalKitten {
            constructor() {
                this.reset();
                this.x = Math.random() * width;
                this.y = Math.random() * height;
            }
            reset() {
                this.x = width / 2;
                this.y = height / 2;
                const ang = Math.random() * Math.PI * 2;
                const force = Math.random() * 5 + 2;
                this.vx = Math.cos(ang) * force;
                this.vy = Math.sin(ang) * force;
                this.emoji = ['üê±', 'üêà', 'üêæ', 'üéÄ', '‚ú®'][Math.floor(Math.random() * 5)];
                this.size = Math.random() * 20 + 20;
                this.rotation = 0;
                this.rotSpeed = (Math.random() - 0.5) * 0.05;
                this.alpha = 0;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.rotation += this.rotSpeed;
                if(this.alpha < 1) this.alpha += 0.02;
                this.vx += Math.sin(Date.now() * 0.001) * 0.05;
                this.vy += Math.cos(Date.now() * 0.001) * 0.05;
                if (this.x < -50) this.x = width + 50;
                if (this.x > width + 50) this.x = -50;
                if (this.y < -50) this.y = height + 50;
                if (this.y > height + 50) this.y = -50;
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                ctx.font = `${this.size}px serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(this.emoji, 0, 0);
                ctx.shadowBlur = 15;
                ctx.shadowColor = "pink";
                ctx.restore();
            }
        }

        function initExperience() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
                heartUI.style.display = 'block';
                startHeartbeat();
            }, 800);
            calculateText();
            createStars();
            requestAnimationFrame(bgLoop);
        }

        function bgLoop() {
            if(animationActive) return;
            ctx.clearRect(0,0,width,height);
            drawStars();
            requestAnimationFrame(bgLoop);
        }

        function drawStars() {
            stars.forEach(s => {
                ctx.fillStyle = `rgba(255, 255, 255, ${s.opacity})`;
                ctx.beginPath(); ctx.arc(s.x, s.y, s.size, 0, Math.PI*2); ctx.fill();
                s.y -= s.speed; if(s.y < 0) s.y = height;
            });
        }

        function calculateText() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            const tCanvas = document.createElement('canvas');
            const tCtx = tCanvas.getContext('2d');
            tCanvas.width = width; tCanvas.height = height;
            let size = width < 600 ? 35 : 70;
            tCtx.fillStyle = 'white';
            tCtx.font = `bold ${size}px 'Dancing Script'`;
            tCtx.textAlign = 'center'; tCtx.textBaseline = 'middle';
            const text = "I LOVE YOU BENAZIR";
            tCtx.fillText(text, width / 2, height / 2);
            const data = tCtx.getImageData(0, 0, width, height).data;
            points = [];
            const gap = width < 600 ? 3 : 5;
            for (let y = 0; y < height; y += gap) {
                for (let x = 0; x < width; x += gap) {
                    const i = (y * width + x) * 4;
                    if (data[i + 3] > 128) points.push({ x, y });
                }
            }
        }

        class HeartParticle {
            constructor(startX, startY) {
                this.x = startX; this.y = startY;
                this.destX = startX; this.destY = startY;
                this.size = Math.random() * 2 + 2;
                const colors = ['#ff0040', '#ff85a1', '#fbb1bd', '#ffd700'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
                const ang = Math.random() * Math.PI * 2;
                const force = Math.random() * 25 + 5;
                this.vx = Math.cos(ang) * force; this.vy = Math.sin(ang) * force;
                this.friction = 0.94; this.mode = 'blast';
            }
            update() {
                if (this.mode === 'blast') {
                    this.x += this.vx; this.y += this.vy;
                    this.vx *= this.friction; this.vy *= this.friction;
                    if (Math.abs(this.vx) < 0.1) this.mode = 'settle';
                } else {
                    this.x += (this.destX - this.x) * 0.06;
                    this.y += (this.destY - this.y) * 0.06;
                }
            }
            draw() {
                ctx.fillStyle = this.color;
                const s = this.size;
                ctx.beginPath(); ctx.moveTo(this.x, this.y);
                ctx.bezierCurveTo(this.x, this.y-s, this.x-s, this.y-s, this.x-s, this.y);
                ctx.bezierCurveTo(this.x-s, this.y+s, this.x, this.y+s, this.x, this.y+s*1.5);
                ctx.bezierCurveTo(this.x, this.y+s, this.x+s, this.y+s, this.x+s, this.y);
                ctx.bezierCurveTo(this.x+s, this.y-s, this.x, this.y-s, this.x, this.y);
                ctx.fill();
            }
        }

        function explode() {
            if (animationActive) return;
            animationActive = true;
            heartUI.style.opacity = '0';
            stopHeartbeat();
            playExplosionSound();
            speak();

            // Start Justin Bieber - Baby
            if (player && player.playVideo) {
                player.setVolume(40); // 40% volume taake voice bhi sunai de
                player.playVideo();
            }

            for(let i=0; i<8; i++) {
                kittens.push(new MagicalKitten());
            }

            particles = points.map(p => {
                const h = new HeartParticle(width / 2, height / 2);
                h.destX = p.x; h.destY = p.y;
                return h;
            });
            mainLoop();
        }

        function mainLoop() {
            ctx.fillStyle = 'rgba(5, 0, 5, 0.2)';
            ctx.fillRect(0, 0, width, height);
            drawStars();
            kittens.forEach(k => { k.update(); k.draw(); });
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(mainLoop);
        }

        let hInterval;
        function startHeartbeat() {
            const pulse = () => {
                if(!audioCtx) return;
                const o = audioCtx.createOscillator();
                const g = audioCtx.createGain();
                o.type = 'sine'; o.frequency.setValueAtTime(50, audioCtx.currentTime);
                g.gain.setValueAtTime(0.3, audioCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                o.connect(g); g.connect(audioCtx.destination);
                o.start(); o.stop(audioCtx.currentTime + 0.1);
            };
            hInterval = setInterval(() => { pulse(); setTimeout(pulse, 200); }, 900);
        }

        function stopHeartbeat() { clearInterval(hInterval); }

        function playExplosionSound() {
            const noise = audioCtx.createBufferSource();
            const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate, audioCtx.sampleRate);
            const data = buffer.getChannelData(0);
            for(let i=0; i<audioCtx.sampleRate; i++) data[i] = Math.random() * 2 - 1;
            noise.buffer = buffer;
            const filt = audioCtx.createBiquadFilter();
            filt.type = 'lowpass'; filt.frequency.setValueAtTime(800, audioCtx.currentTime);
            filt.frequency.exponentialRampToValueAtTime(20, audioCtx.currentTime + 1);
            const g = audioCtx.createGain();
            g.gain.setValueAtTime(0.5, audioCtx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 1);
            noise.connect(filt); filt.connect(g); g.connect(audioCtx.destination);
            noise.start();
        }

        async function speak() {
            const payload = {
                contents: [{ parts: [{ text: "Say cheerfully: Meow! I love you so much, Benazir Fatima!" }] }],
                generationConfig: { responseModalities: ["AUDIO"], speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Kore" } } } },
                model: "gemini-2.5-flash-preview-tts"
            };
            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`, {
                    method: 'POST', headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const r = await res.json();
                const b64 = r.candidates[0].content.parts[0].inlineData.data;
                const audio = new Audio(URL.createObjectURL(pcmToWav(b64, 24000)));
                audio.play();
            } catch(e) {}
        }

        function pcmToWav(b64, sr) {
            const pcm = Uint8Array.from(atob(b64), c => c.charCodeAt(0)).buffer;
            const buf = new ArrayBuffer(44 + pcm.byteLength);
            const v = new DataView(buf);
            const s = (o, str) => { for(let i=0; i<str.length; i++) v.setUint8(o+i, str.charCodeAt(i)) };
            s(0, 'RIFF'); v.setUint32(4, 32 + pcm.byteLength, true); s(8, 'WAVE');
            s(12, 'fmt '); v.setUint32(16, 16, true); v.setUint16(20, 1, true);
            v.setUint16(22, 1, true); v.setUint32(24, sr, true);
            v.setUint32(28, sr * 2, true); v.setUint16(32, 2, true);
            v.setUint16(34, 16, true); s(36, 'data'); v.setUint32(40, pcm.byteLength, true);
            new Uint8Array(buf, 44).set(new Uint8Array(pcm));
            return new Blob([buf], { type: 'audio/wav' });
        }

        window.addEventListener('resize', () => { calculateText(); createStars(); });
    </script>
</body>
</html>

